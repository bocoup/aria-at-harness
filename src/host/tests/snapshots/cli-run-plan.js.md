# Snapshot report for `src/host/tests/cli-run-plan.js`

The actual snapshot is saved in `cli-run-plan.js.snap`.

Generated by [AVA](https://avajs.dev).

## plan1

> Snapshot 1

    {
      stderr: `Starting...␊
      Reference server listening on 'http://localhost:8888'.␊
      Plan 'unknown' with 2 tests and 3 files read from source 'fork'.␊
      Reference available on 'http://localhost:8888/static␊
      Starting test agent.␊
      [Agent]: Starting...␊
      Agent running with protocol 'fork'.␊
      Starting test.␊
      [Server]: Serving '/static/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/index.html'.␊
      Starting test.␊
      [Server]: Serving '/static/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/index.html'.␊
      Removing reference from 'http://localhost:8888/static␊
      Stopping test agent.␊
      [Agent]: Stopping...␊
      Stopping reference server.␊
      Stopping...␊
      `,
      stdout: `{"name":"unknown","tests":[{"filepath":"test-1.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/index.html'."}],"results":[{"testId":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW","output":"mocked output for UP_ARROW"}],"results":[{"command":"UP_ARROW","expectation":"role up","pass":true,"output":"mocked output for role up"}]}]},{"filepath":"test-2.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/index.html'."}],"results":[{"testId":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW,DOWN_ARROW","output":"mocked output for UP_ARROW,DOWN_ARROW"}],"results":[{"command":"UP_ARROW,DOWN_ARROW","expectation":"role down","pass":true,"output":"mocked output for role down"}]}]}],"log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/index.html'."},{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/index.html'."}]}␊
      `,
    }

## plan2

> Snapshot 1

    {
      stderr: `Starting...␊
      Reference server listening on 'http://localhost:8888'.␊
      Plan 'unknown' with 2 tests and 4 files read from source 'fork'.␊
      Reference available on 'http://localhost:8888/static␊
      Starting test agent.␊
      [Agent]: Starting...␊
      Agent running with protocol 'fork'.␊
      Starting test.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Starting test.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Removing reference from 'http://localhost:8888/static␊
      Stopping test agent.␊
      [Agent]: Stopping...␊
      Stopping reference server.␊
      Stopping...␊
      `,
      stdout: `{"name":"unknown","tests":[{"filepath":"test-1.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW","output":"mocked output for UP_ARROW"}],"results":[{"command":"UP_ARROW","expectation":"role up","pass":true,"output":"mocked output for role up"}]}]},{"filepath":"test-2.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW,DOWN_ARROW","output":"mocked output for UP_ARROW,DOWN_ARROW"}],"results":[{"command":"UP_ARROW,DOWN_ARROW","expectation":"role down","pass":true,"output":"mocked output for role down"}]}]}],"log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."},{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}]}␊
      `,
    }

## plan3

> Snapshot 1

    {
      stderr: `Starting...␊
      Reference server listening on 'http://localhost:8888'.␊
      Plan 'unknown' with 2 tests and 4 files read from source 'fork'.␊
      Reference available on 'http://localhost:8888/static␊
      Starting test agent.␊
      [Agent]: Starting...␊
      Agent running with protocol 'fork'.␊
      Starting test.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Starting test.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Removing reference from 'http://localhost:8888/static␊
      Stopping test agent.␊
      [Agent]: Stopping...␊
      Stopping reference server.␊
      Stopping...␊
      `,
      stdout: `{"name":"unknown","tests":[{"filepath":"tests/test-1.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW","output":"mocked output for UP_ARROW"}],"results":[{"command":"UP_ARROW","expectation":"role up","pass":true,"output":"mocked output for role up"}]}]},{"filepath":"tests/test-2.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW,DOWN_ARROW","output":"mocked output for UP_ARROW,DOWN_ARROW"}],"results":[{"command":"UP_ARROW,DOWN_ARROW","expectation":"role down","pass":true,"output":"mocked output for role down"}]}]}],"log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."},{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}]}␊
      `,
    }

## plan3 with callback

> Snapshot 1

    {
      stderr: `Starting...␊
      Reference server listening on 'http://localhost:8888'.␊
      Plan 'unknown' with 2 tests and 4 files read from source 'fork'.␊
      Reference available on 'http://localhost:8888/static␊
      Starting test agent.␊
      [Agent]: Starting...␊
      Agent running with protocol 'fork'.␊
      Starting test.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Starting test.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Removing reference from 'http://localhost:8888/static␊
      Stopping test agent.␊
      [Agent]: Stopping...␊
      Stopping reference server.␊
      Stopping...␊
      `,
      stdout: `Callback Fetch Mocked:  http://callback.url/ {␊
        method: 'post',␊
        body: '{"testCsvRow":1,"status":"RUNNING"}',␊
        headers: { 'Content-Type': 'application/json', test: 'header:multiple:colon' }␊
      }␊
      Callback Fetch Mocked:  http://callback.url/ {␊
        method: 'post',␊
        body: '{"testCsvRow":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"responses":["mocked output for UP_ARROW"]}',␊
        headers: { 'Content-Type': 'application/json', test: 'header:multiple:colon' }␊
      }␊
      Callback Fetch Mocked:  http://callback.url/ {␊
        method: 'post',␊
        body: '{"testCsvRow":2,"status":"RUNNING"}',␊
        headers: { 'Content-Type': 'application/json', test: 'header:multiple:colon' }␊
      }␊
      Callback Fetch Mocked:  http://callback.url/ {␊
        method: 'post',␊
        body: '{"testCsvRow":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"responses":["mocked output for UP_ARROW,DOWN_ARROW"]}',␊
        headers: { 'Content-Type': 'application/json', test: 'header:multiple:colon' }␊
      }␊
      {"name":"unknown","tests":[{"filepath":"tests/test-1.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW","output":"mocked output for UP_ARROW"}],"results":[{"command":"UP_ARROW","expectation":"role up","pass":true,"output":"mocked output for role up"}]}]},{"filepath":"tests/test-2.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW,DOWN_ARROW","output":"mocked output for UP_ARROW,DOWN_ARROW"}],"results":[{"command":"UP_ARROW,DOWN_ARROW","expectation":"role down","pass":true,"output":"mocked output for role down"}]}]}],"log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."},{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}]}␊
      `,
    }

## plan3 with callback request which fails

> Snapshot 1

    {
      stderr: `Starting...␊
      Reference server listening on 'http://localhost:8888'.␊
      Plan 'unknown' with 2 tests and 4 files read from source 'fork'.␊
      Reference available on 'http://localhost:8888/static␊
      Starting test agent.␊
      [Agent]: Starting...␊
      Agent running with protocol 'fork'.␊
      Starting test.␊
      HTTP 418 response received when reporting result: 'a body'.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Starting test.␊
      HTTP 418 response received when reporting result: 'a body'.␊
      HTTP 418 response received when reporting result: 'a body'.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Removing reference from 'http://localhost:8888/static␊
      Stopping test agent.␊
      HTTP 418 response received when reporting result: 'a body'.␊
      [Agent]: Stopping...␊
      Stopping reference server.␊
      Stopping...␊
      `,
      stdout: `Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418 {␊
        method: 'post',␊
        body: '{"testCsvRow":1,"status":"RUNNING"}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418 {␊
        method: 'post',␊
        body: '{"testCsvRow":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"responses":["mocked output for UP_ARROW"]}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418 {␊
        method: 'post',␊
        body: '{"testCsvRow":2,"status":"RUNNING"}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418 {␊
        method: 'post',␊
        body: '{"testCsvRow":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"responses":["mocked output for UP_ARROW,DOWN_ARROW"]}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      {"name":"unknown","tests":[{"filepath":"tests/test-1.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW","output":"mocked output for UP_ARROW"}],"results":[{"command":"UP_ARROW","expectation":"role up","pass":true,"output":"mocked output for role up"}]}]},{"filepath":"tests/test-2.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW,DOWN_ARROW","output":"mocked output for UP_ARROW,DOWN_ARROW"}],"results":[{"command":"UP_ARROW,DOWN_ARROW","expectation":"role down","pass":true,"output":"mocked output for role down"}]}]}],"log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."},{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}]}␊
      `,
    }

## plan3 with callback request which fails with a faulty response body

> Snapshot 1

    {
      stderr: `Starting...␊
      Reference server listening on 'http://localhost:8888'.␊
      Plan 'unknown' with 2 tests and 4 files read from source 'fork'.␊
      Reference available on 'http://localhost:8888/static␊
      Starting test agent.␊
      [Agent]: Starting...␊
      Agent running with protocol 'fork'.␊
      Starting test.␊
      HTTP 418 response received when reporting result: 'Unknown error - unable to read response body.'.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Starting test.␊
      HTTP 418 response received when reporting result: 'Unknown error - unable to read response body.'.␊
      HTTP 418 response received when reporting result: 'Unknown error - unable to read response body.'.␊
      [Server]: Serving '/static/reference/index.html'.␊
      [Agent]: Open page: 'http://localhost:8888/static/reference/index.html'.␊
      Removing reference from 'http://localhost:8888/static␊
      Stopping test agent.␊
      HTTP 418 response received when reporting result: 'Unknown error - unable to read response body.'.␊
      [Agent]: Stopping...␊
      Stopping reference server.␊
      Stopping...␊
      `,
      stdout: `Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418&TEST-BAD-BODY {␊
        method: 'post',␊
        body: '{"testCsvRow":1,"status":"RUNNING"}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418&TEST-BAD-BODY {␊
        method: 'post',␊
        body: '{"testCsvRow":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"responses":["mocked output for UP_ARROW"]}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418&TEST-BAD-BODY {␊
        method: 'post',␊
        body: '{"testCsvRow":2,"status":"RUNNING"}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      Callback Fetch Mocked:  http://example.com/?TEST-STATUS=418&TEST-BAD-BODY {␊
        method: 'post',␊
        body: '{"testCsvRow":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"responses":["mocked output for UP_ARROW,DOWN_ARROW"]}',␊
        headers: { 'Content-Type': 'application/json', x: 'y' }␊
      }␊
      {"name":"unknown","tests":[{"filepath":"tests/test-1.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":1,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW","output":"mocked output for UP_ARROW"}],"results":[{"command":"UP_ARROW","expectation":"role up","pass":true,"output":"mocked output for role up"}]}]},{"filepath":"tests/test-2.json","log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}],"results":[{"testId":2,"capabilities":{"browserName":"mock","browserVersion":"1.0","atName":"mock","atVersion":"1.0","platformName":"mock"},"commands":[{"command":"UP_ARROW,DOWN_ARROW","output":"mocked output for UP_ARROW,DOWN_ARROW"}],"results":[{"command":"UP_ARROW,DOWN_ARROW","expectation":"role down","pass":true,"output":"mocked output for role down"}]}]}],"log":[{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."},{"data":{"type":"openPage","date":"2000-01-01T12:00:00.000Z","url":{}},"text":"Open page: 'http://localhost:8888/static/reference/index.html'."}]}␊
      `,
    }
